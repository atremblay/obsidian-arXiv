/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var fs = __toESM(require("fs"));
var path = __toESM(require("path"));
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var ArxivPlugin = class extends import_obsidian.Plugin {
  //settings: ArXivPluginSettings;
  async fetchPaper(paperId, paperName) {
    if (paperId) {
      try {
        const data = await this.fetchPaperData(paperId, paperName);
        await this.createNote(data);
      } catch (error) {
        console.error("Error fetching paper data:", error);
        new import_obsidian.Notice(`Error fetching paper data: ${paperId}`);
      }
    }
  }
  fetchPaperData(id, name) {
    return new Promise((resolve2, reject) => {
      const url = `http://export.arxiv.org/api/query?id_list=${id}`;
      const xhr = new XMLHttpRequest();
      xhr.open("GET", url);
      xhr.onreadystatechange = () => {
        var _a, _b, _c, _d, _e;
        if (xhr.readyState === 4) {
          if (xhr.status === 200) {
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(xhr.responseText, "application/xml");
            const entry = xmlDoc.querySelector("entry");
            if (entry) {
              const title = ((_a = entry.querySelector("title")) == null ? void 0 : _a.textContent) || "No Title";
              const authors = Array.from(entry.querySelectorAll("author name")).map((el) => el.textContent).join(", ") || "No Authors";
              const publicationDateRaw = (_b = entry.querySelector("published")) == null ? void 0 : _b.textContent;
              const publicationDate = publicationDateRaw ? new Date(publicationDateRaw).toISOString().split("T")[0] : "No Publication Date";
              const url2 = ((_c = entry.querySelector("id")) == null ? void 0 : _c.textContent) || "No URL";
              let summary = ((_d = entry.querySelector("summary")) == null ? void 0 : _d.textContent) || "No Summary";
              summary = summary.replace(/(\r\n|\n|\r)/gm, " ").trim();
              const pdfLink = ((_e = xmlDoc.querySelector('link[title="pdf"]')) == null ? void 0 : _e.getAttribute("href")) || "No PDF Link";
              console.log("paperName: ", name);
              if (name === void 0) {
                name = id;
              }
              resolve2({ title, authors, publicationDate, summary, id, url: url2, pdfLink, name });
            } else {
              reject(new Error("No entry found in the response"));
            }
          } else {
            reject(new Error("Failed to fetch data"));
          }
        }
      };
      xhr.send();
    });
  }
  async createNote(data) {
    const authorsList = data.authors.split(", ").map((author) => `  - "${author}"`).join("\n");
    const frontMatter = `---
title: "${data.title}"
authors:
${authorsList}
published: "${data.publicationDate}"
arXiv: "${data.url}"
paper: "${data.pdfLink}"
---
`;
    const content = `
#### Abstract

${data.summary}
		`;
    await this.app.vault.create(`${data.name}.md`, frontMatter + content);
    new import_obsidian.Notice(`Created note: ${data.name}`);
  }
  async onload() {
    try {
      const arXivLogo = await this.readSVGFile();
      (0, import_obsidian.addIcon)("arXiv", arXivLogo);
      const ribbonIconEl = this.addRibbonIcon("arXiv", "arXiv fetch paper", () => {
        new ArXivModal(this.app, (paperId, paperName) => {
          this.fetchPaper(paperId, paperName);
        }).open();
      });
      ribbonIconEl.addClass("my-plugin-ribbon-class");
    } catch (error) {
      console.error("Error:", error);
    }
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText("Status Bar Text");
    this.addCommand({
      id: "open-arXiv-modal",
      name: "Fetch arXiv paper info",
      callback: () => {
        new ArXivModal(this.app, (paperId, paperName) => {
          this.fetchPaper(paperId, paperName);
        }).open();
      }
    });
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async readSVGFile() {
    const filePath = path.resolve(
      this.app.vault.adapter.basePath,
      this.manifest.dir,
      "arxiv-logomark.svg"
    );
    return new Promise((resolve2, reject) => {
      fs.readFile(filePath, "utf8", (err, data) => {
        if (err) {
          console.error("Error reading SVG file:", err);
          reject(err);
        } else {
          resolve2(data);
        }
      });
    });
  }
};
var ArXivModal = class extends import_obsidian.Modal {
  constructor(app, onSubmit) {
    super(app);
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    new import_obsidian.Setting(contentEl).setName("arXiv id:").addText((text) => text.onChange((value) => {
      this.arXivID = value;
    }));
    new import_obsidian.Setting(contentEl).setName("Paper name (optional):").addText((text) => text.onChange((value) => {
      this.paperName = value;
    }));
    new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Fetch").setCta().onClick(() => {
      this.close();
      this.onSubmit(this.arXivID, this.paperName);
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var main_default = ArxivPlugin;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgYWRkSWNvbiwgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXG5cbmludGVyZmFjZSBBclhpdlBsdWdpblNldHRpbmdzIHtcblx0bXlTZXR0aW5nOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBQYXBlckRhdGEge1xuICB0aXRsZTogc3RyaW5nO1xuICBhdXRob3JzOiBzdHJpbmc7XG4gIHB1YmxpY2F0aW9uRGF0ZTogc3RyaW5nO1xuICBzdW1tYXJ5OiBzdHJpbmc7XG4gIGlkOiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICBwZGZMaW5rOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogQXJYaXZQbHVnaW5TZXR0aW5ncyA9IHtcblx0bXlTZXR0aW5nOiAnZGVmYXVsdCdcbn1cblxuY2xhc3MgQXJ4aXZQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHQvL3NldHRpbmdzOiBBclhpdlBsdWdpblNldHRpbmdzO1xuXG5cdGFzeW5jIGZldGNoUGFwZXIocGFwZXJJZDogc3RyaW5nLCBwYXBlck5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmIChwYXBlcklkKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5mZXRjaFBhcGVyRGF0YShwYXBlcklkLCBwYXBlck5hbWUpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZU5vdGUoZGF0YSk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwYXBlciBkYXRhOicsIGVycm9yKTtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3IgZmV0Y2hpbmcgcGFwZXIgZGF0YTogJHtwYXBlcklkfWApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZldGNoUGFwZXJEYXRhKGlkOiBzdHJpbmcsIG5hbWU6c3RyaW5nKTogUHJvbWlzZTxQYXBlckRhdGE+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Y29uc3QgdXJsID0gYGh0dHA6Ly9leHBvcnQuYXJ4aXYub3JnL2FwaS9xdWVyeT9pZF9saXN0PSR7aWR9YDtcblx0XHRcdFx0Y29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFx0XHR4aHIub3BlbignR0VUJywgdXJsKTtcblx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuXHRcdFx0XHRcdGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcblx0XHRcdFx0XHRcdGNvbnN0IHhtbERvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoeGhyLnJlc3BvbnNlVGV4dCwgJ2FwcGxpY2F0aW9uL3htbCcpO1xuXHRcdFx0XHRcdFx0Y29uc3QgZW50cnkgPSB4bWxEb2MucXVlcnlTZWxlY3RvcignZW50cnknKTtcblxuXHRcdFx0XHRcdFx0aWYgKGVudHJ5KSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRpdGxlID0gZW50cnkucXVlcnlTZWxlY3RvcigndGl0bGUnKT8udGV4dENvbnRlbnQgfHwgJ05vIFRpdGxlJztcblx0XHRcdFx0XHRcdFx0Y29uc3QgYXV0aG9ycyA9IEFycmF5LmZyb20oZW50cnkucXVlcnlTZWxlY3RvckFsbCgnYXV0aG9yIG5hbWUnKSkubWFwKGVsID0+IGVsLnRleHRDb250ZW50KS5qb2luKCcsICcpIHx8ICdObyBBdXRob3JzJztcblx0XHRcdFx0XHRcdFx0Y29uc3QgcHVibGljYXRpb25EYXRlUmF3ID0gZW50cnkucXVlcnlTZWxlY3RvcigncHVibGlzaGVkJyk/LnRleHRDb250ZW50O1xuXHRcdFx0XHRcdFx0XHRjb25zdCBwdWJsaWNhdGlvbkRhdGUgPSBwdWJsaWNhdGlvbkRhdGVSYXcgPyAobmV3IERhdGUocHVibGljYXRpb25EYXRlUmF3KSkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdIDogJ05vIFB1YmxpY2F0aW9uIERhdGUnO1xuXHRcdFx0XHRcdFx0XHRjb25zdCB1cmwgPSBlbnRyeS5xdWVyeVNlbGVjdG9yKCdpZCcpPy50ZXh0Q29udGVudCB8fCAnTm8gVVJMJztcblx0XHRcdFx0XHRcdFx0bGV0IHN1bW1hcnkgPSBlbnRyeS5xdWVyeVNlbGVjdG9yKCdzdW1tYXJ5Jyk/LnRleHRDb250ZW50IHx8ICdObyBTdW1tYXJ5Jztcblx0XHRcdFx0XHRcdFx0c3VtbWFyeSA9IHN1bW1hcnkucmVwbGFjZSgvKFxcclxcbnxcXG58XFxyKS9nbSwgXCIgXCIpLnRyaW0oKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcGRmTGluayA9IHhtbERvYy5xdWVyeVNlbGVjdG9yKCdsaW5rW3RpdGxlPVwicGRmXCJdJyk/LmdldEF0dHJpYnV0ZSgnaHJlZicpIHx8ICdObyBQREYgTGluayc7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicGFwZXJOYW1lOiBcIiwgbmFtZSk7XG5cdFx0XHRcdFx0XHRcdGlmIChuYW1lID09PSB1bmRlZmluZWQpe1xuXHRcdFx0XHRcdFx0XHRcdG5hbWUgPSBpZDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKHsgdGl0bGUsIGF1dGhvcnMsIHB1YmxpY2F0aW9uRGF0ZSwgc3VtbWFyeSAsIGlkLCB1cmwsIHBkZkxpbmssIG5hbWV9KTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJlamVjdChuZXcgRXJyb3IoJ05vIGVudHJ5IGZvdW5kIGluIHRoZSByZXNwb25zZScpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIGRhdGEnKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0eGhyLnNlbmQoKTtcblx0XHR9KTtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZU5vdGUoZGF0YTogUGFwZXJEYXRhKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgYXV0aG9yc0xpc3QgPSBkYXRhLmF1dGhvcnMuc3BsaXQoJywgJykubWFwKGF1dGhvciA9PiBgICAtIFwiJHthdXRob3J9XCJgKS5qb2luKCdcXG4nKTtcblx0XHRjb25zdCBmcm9udE1hdHRlciA9IGAtLS1cbnRpdGxlOiBcIiR7ZGF0YS50aXRsZX1cIlxuYXV0aG9yczpcbiR7YXV0aG9yc0xpc3R9XG5wdWJsaXNoZWQ6IFwiJHtkYXRhLnB1YmxpY2F0aW9uRGF0ZX1cIlxuYXJYaXY6IFwiJHtkYXRhLnVybH1cIlxucGFwZXI6IFwiJHtkYXRhLnBkZkxpbmt9XCJcbi0tLVxuYDtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBgXG4jIyMjIEFic3RyYWN0XG5cbiR7ZGF0YS5zdW1tYXJ5fVxuXHRcdGA7XG5cblx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoYCR7ZGF0YS5uYW1lfS5tZGAsIGZyb250TWF0dGVyICsgY29udGVudCk7XG5cdFx0bmV3IE5vdGljZShgQ3JlYXRlZCBub3RlOiAke2RhdGEubmFtZX1gKTtcblx0fVxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Ly9hd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGFyWGl2TG9nbyA9IGF3YWl0IHRoaXMucmVhZFNWR0ZpbGUoKTtcblx0XHRcdGFkZEljb24oJ2FyWGl2JywgYXJYaXZMb2dvKTtcblxuXHRcdFx0Y29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKFwiYXJYaXZcIiwgXCJhclhpdiBmZXRjaCBwYXBlclwiLCAoKSA9PiB7XG5cdFx0XHRcdG5ldyBBclhpdk1vZGFsKHRoaXMuYXBwLCAocGFwZXJJZCwgcGFwZXJOYW1lKSA9PiB7XG5cdFx0XHRcdHRoaXMuZmV0Y2hQYXBlcihwYXBlcklkLCBwYXBlck5hbWUpO1xuXHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHR9KTtcblx0XHRcdHJpYmJvbkljb25FbC5hZGRDbGFzcygnbXktcGx1Z2luLXJpYmJvbi1jbGFzcycpO1xuXHRcdFx0Ly9jb25zb2xlLmxvZygnUmVjZWl2ZWQgZGF0YTonLCBkYXRhKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuXHRcdH1cblxuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc3RhdHVzIGJhciBpdGVtIHRvIHRoZSBib3R0b20gb2YgdGhlIGFwcC4gRG9lcyBub3Qgd29yayBvbiBtb2JpbGUgYXBwcy5cblx0XHRjb25zdCBzdGF0dXNCYXJJdGVtRWwgPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcblx0XHRzdGF0dXNCYXJJdGVtRWwuc2V0VGV4dCgnU3RhdHVzIEJhciBUZXh0Jyk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzaW1wbGUgY29tbWFuZCB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYW55d2hlcmVcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdvcGVuLWFyWGl2LW1vZGFsJyxcblx0XHRcdG5hbWU6ICdGZXRjaCBhclhpdiBwYXBlciBpbmZvJyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBBclhpdk1vZGFsKHRoaXMuYXBwLCAocGFwZXJJZCwgcGFwZXJOYW1lKSA9PiB7XG5cdFx0XHRcdHRoaXMuZmV0Y2hQYXBlcihwYXBlcklkLCBwYXBlck5hbWUpO1xuXHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxuXHRcdC8vdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBBclhpdlNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cdGFzeW5jIHJlYWRTVkdGaWxlKCk6IFByb21pc2U8c3RyaW5nPiB7XG5cblx0XHRjb25zdCBmaWxlUGF0aCA9IHBhdGgucmVzb2x2ZShcblx0XHRcdHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuYmFzZVBhdGgsIFxuXHRcdFx0dGhpcy5tYW5pZmVzdC5kaXIsXG5cdFx0XHQnYXJ4aXYtbG9nb21hcmsuc3ZnJ1xuXHRcdCk7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0ZnMucmVhZEZpbGUoZmlsZVBhdGgsICd1dGY4JywgKGVyciwgZGF0YSkgPT4ge1xuXHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBTVkcgZmlsZTonLCBlcnIpO1xuXHRcdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc29sdmUoZGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG59XG5cblxuY2xhc3MgQXJYaXZTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogQXJ4aXZQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQXJ4aXZQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1NldHRpbmcgIzEnKVxuXHRcdFx0LnNldERlc2MoJ0l0XFwncyBhIHNlY3JldCcpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHNlY3JldCcpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmcpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmcgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXHR9XG59XG5cbmNsYXNzIEFyWGl2TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGFyWGl2SUQ6IHN0cmluZztcbiAgcGFwZXJOYW1lOiBzdHJpbmc7XG4gIG9uU3VibWl0OiAocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU3VibWl0OiAoYXJYaXZJRDogc3RyaW5nLCBwYXBlck5hbWU6IHN0cmluZykgPT4gdm9pZCkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZShcImFyWGl2IGlkOlwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5hclhpdklEID0gdmFsdWVcbiAgICAgICAgfSkpO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoXCJQYXBlciBuYW1lIChvcHRpb25hbCk6XCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBhcGVyTmFtZSA9IHZhbHVlXG4gICAgICAgIH0pKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgYnRuXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJGZXRjaFwiKVxuICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMub25TdWJtaXQodGhpcy5hclhpdklELCB0aGlzLnBhcGVyTmFtZSk7XG4gICAgICAgICAgfSkpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcnhpdlBsdWdpbjtcblxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBcUc7QUFDckcsU0FB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
